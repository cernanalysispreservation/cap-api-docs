post:
  summary: Create a new draft
  description: >
    To create a new draft you need to pass a correct analysis type (`$ana_type`)
    OR a correct JSON Schema (`$schema`).


    JSON Schemas and analysis types (`$ana_type`) depend on the access rights
    you have and mainly 

    correspond to the CERN collaboration you are part of (***ALICE, ATLAS, CMS,
    LHCb***).
  tags:
    - Deposits
  requestBody:
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/Deposit'
        examples:
          simple:
            value:
              $ana_type: cms-analysis
              analysis_title: Test title
          simple_with_schema:
            value:
              $schema: >-
                https://analysispreservation.cern.ch/api/schemas/deposits/records/cms-analysis-v0.0.1.json
              analysis_title: Test title
  responses:
    '200':
      description: OK
      headers:
        X-Rate-Limit:
          $ref: '#/components/headers/RateLimit'
        X-Expires-After:
          $ref: '#/components/headers/ExpiresAfter'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/DepositResponse'
          examples:
            depositResponse:
              $ref: '#/components/examples/depositResponse'
    '400':
      description: Validation error
      content:
        application/json:
          examples:
            noAnatypeNoSchema:
              $ref: '#/components/examples/noAnatypeNoSchema'
            validationError:
              $ref: '#/components/examples/validationError'
    '401':
      $ref: '#/components/responses/NotAuthorized'
get:
  summary: List all deposits/drafts
  description: >-
    List all deposits for the currently authenticated user. At least `read`
    access is needed to query a record
  tags:
    - Deposits
  parameters:
    - $ref: '#/components/parameters/query'
    - $ref: '#/components/parameters/status'
    - $ref: '#/components/parameters/sort'
    - $ref: '#/components/parameters/page'
    - $ref: '#/components/parameters/size'
  responses:
    '200':
      description: OK
      headers:
        X-Rate-Limit:
          $ref: '#/components/headers/RateLimit'
        X-Expires-After:
          $ref: '#/components/headers/ExpiresAfter'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/DepositSearchResponse'
          examples:
            depositSearchResponse:
              $ref: '#/components/examples/depositSearchResponse'
    '401':
      $ref: '#/components/responses/NotAuthorized'
