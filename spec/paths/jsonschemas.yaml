get:
  tags:
    - JSON Schemas
  summary: Get a list of available JSON Schemas
  description: >-
    List of the available JSON Schemas that current user has access to. They can be used to create an analysis
    record.

  operationId: getJSONSchemas
  responses:
    '200':
      description: OK
      headers:
        X-Rate-Limit:
          $ref: '#/components/headers/RateLimit'
        X-Expires-After:
          $ref: '#/components/headers/ExpiresAfter'
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/JSONSchemaResource'
          examples:
            response:
              value:
                - deposit_mapping: {}
                  deposit_options: {}
                  deposit_schema: {}
                  fullname: ''
                  is_indexed: false
                  links:
                    deposit: >-
                      https://analysispreservation.cern/ch/api/schemas/deposits/records/access-v0.0.1.json
                    record: >-
                      https://analysispreservation.cern/ch/api/schemas/records/access-v0.0.1.json
                    self: 'https://analysispreservation.cern/ch/api/jsonschemas/access/0.0.1'
                  name: access
                  record_mapping: {}
                  record_options: {}
                  record_schema: {}
                  use_deposit_as_record: true
                  version: 0.0.1
    '401':
      $ref: '#/components/responses/NotAuthorized'
post:
  tags:
    - JSON Schemas
  summary: Create a new JSON Schema
  description: >
    Create a new JSON Schema. Add your customized schemas for records and
    deposits, your corresponding UI form options and ES search mapping for
    better indexing.
  operationId: createJSONSchemas
  requestBody:
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/JSONSchemaResource'
        examples:
          simple:
            $ref: '#/components/examples/JSONSchemaResource'
    description: |
      A JSON object that will populate the `Schema` resource
    required: true
  responses:
    '200':
      description: OK
      headers:
        X-Rate-Limit:
          $ref: '#/components/headers/RateLimit'
        X-Expires-After:
          $ref: '#/components/headers/ExpiresAfter'
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/JSONSchemaResource'
          examples:
            response:
              $ref: '#/components/examples/JSONSchemaResource'
    '400':
      description: Bad Request
      content:
        application/json:
          schema:
            type: object
            properties:
              message:
                type: object
              status:
                type: integer
          examples:
            response:
              value:
                - message: {}
                  status: 400
    '401':
      $ref: '#/components/responses/NotAuthorized'
